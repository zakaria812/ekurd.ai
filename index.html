<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus AI Pro - Intelligent Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        dark: {
                            950: '#030303',
                            900: '#0a0a0a',
                            850: '#0f0f0f',
                            800: '#151515',
                            750: '#1a1a1a',
                            700: '#1f1f1f',
                        },
                        accent: {
                            gold: '#f59e0b',
                            amber: '#d97706',
                            blue: '#3b82f6',
                            cyan: '#06b6d4',
                            purple: '#8b5cf6',
                        }
                    },
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'scale-in': 'scaleIn 0.2s ease-out',
                        'wave': 'wave 1.2s ease-in-out infinite',
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(245, 158, 11, 0.1)' },
                            '100%': { boxShadow: '0 0 40px rgba(245, 158, 11, 0.3), 0 0 60px rgba(59, 130, 246, 0.1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        wave: {
                            '0%, 100%': { transform: 'scaleY(1)' },
                            '50%': { transform: 'scaleY(2)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            background-color: #030303;
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Glass Effects */
        .glass {
            background: rgba(21, 21, 21, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .glass-strong {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(30px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Input Styles */
        .hero-input {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 1px rgba(245, 158, 11, 0),
                        0 20px 50px -10px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hero-input:focus-within {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(245, 158, 11, 0.3);
            box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.2),
                        0 25px 60px -15px rgba(245, 158, 11, 0.15),
                        0 20px 50px -10px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        .bottom-input {
            background: rgba(26, 26, 26, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .bottom-input:focus-within {
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
        }

        /* Message Animations */
        .message-appear {
            animation: messageAppear 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Typing Indicator */
        .typing-wave {
            display: flex;
            gap: 3px;
            height: 20px;
            align-items: center;
        }
        .typing-bar {
            width: 4px;
            height: 8px;
            background: linear-gradient(to top, #f59e0b, #3b82f6);
            border-radius: 2px;
            animation: wave 1.2s ease-in-out infinite;
        }
        .typing-bar:nth-child(2) { animation-delay: 0.1s; }
        .typing-bar:nth-child(3) { animation-delay: 0.2s; }
        .typing-bar:nth-child(4) { animation-delay: 0.3s; }

        /* Code Blocks */
        .code-block {
            background: #0d0d0d;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            margin: 1rem 0;
        }
        .code-header {
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .code-content {
            padding: 1rem;
            overflow-x: auto;
        }

        /* Gradient Text */
        .text-gradient {
            background: linear-gradient(135deg, #f59e0b 0%, #3b82f6 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradient 8s ease infinite;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Aurora Background */
        .aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.4;
            background: 
                radial-gradient(circle at 20% 50%, rgba(245, 158, 11, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            filter: blur(60px);
        }

        /* Input Modes */
        .input-mode-active {
            color: #f59e0b;
            transform: scale(1.1);
        }

        /* Image Upload Preview */
        .upload-preview {
            animation: scaleIn 0.3s ease-out;
        }

        /* Stream Text Effect */
        .stream-text {
            opacity: 0;
            animation: fadeIn 0.1s ease-out forwards;
        }

        /* Sidebar Item Hover */
        .sidebar-item {
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }
        .sidebar-item.active {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
        }

        /* Voice Wave Animation */
        .voice-wave {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 24px;
        }
        .voice-bar {
            width: 3px;
            background: linear-gradient(to top, #f59e0b, #3b82f6);
            border-radius: 3px;
            transition: height 0.1s ease;
        }
    </style>
</head>
<body class="h-screen w-full antialiased selection:bg-amber-500/30 selection:text-amber-200">

    <!-- Aurora Background -->
    <div class="aurora"></div>

    <!-- App Container -->
    <div class="flex h-full w-full relative">
        
        <!-- Sidebar -->
        <aside id="sidebar" class="w-80 h-full glass-strong flex flex-col transform -translate-x-full md:translate-x-0 transition-transform duration-300 absolute md:relative z-50 border-r border-white/5">
            <!-- Logo -->
            <div class="p-5 border-b border-white/5 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-blue-600 flex items-center justify-center shadow-lg shadow-amber-500/20 animate-glow">
                        <i class="fas fa-bolt text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-lg tracking-tight">Nexus AI</h1>
                        <p class="text-[10px] text-neutral-500 uppercase tracking-widest">Pro Edition</p>
                    </div>
                </div>
                <button onclick="chatApp.toggleSidebar()" class="md:hidden text-neutral-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- New Chat -->
            <div class="p-4">
                <button onclick="chatApp.newChat()" class="w-full py-3 px-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-amber-500/30 transition-all flex items-center gap-3 group">
                    <i class="fas fa-plus text-amber-500 group-hover:rotate-90 transition-transform duration-300"></i>
                    <span class="text-sm font-medium">New Conversation</span>
                </button>
            </div>

            <!-- History -->
            <div class="flex-1 overflow-y-auto px-3 space-y-1" id="historyList">
                <!-- Dynamic -->
            </div>

            <!-- Bottom Actions -->
            <div class="p-4 border-t border-white/5 space-y-1">
                <button onclick="chatApp.toggleSettings()" class="sidebar-item w-full p-3 rounded-xl flex items-center gap-3 text-sm text-neutral-400 hover:text-white">
                    <i class="fas fa-cog w-5"></i>
                    <span>Settings</span>
                </button>
                <button onclick="chatApp.exportChat()" class="sidebar-item w-full p-3 rounded-xl flex items-center gap-3 text-sm text-neutral-400 hover:text-white">
                    <i class="fas fa-download w-5"></i>
                    <span>Export Chat</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col relative h-full overflow-hidden">
            
            <!-- Header -->
            <header class="h-16 glass border-b border-white/5 flex items-center justify-between px-6 z-40">
                <div class="flex items-center gap-4">
                    <button onclick="chatApp.toggleSidebar()" class="md:hidden p-2 -ml-2 rounded-lg hover:bg-white/5 text-neutral-400">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div id="modelBadge" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 text-xs font-medium">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                        <span class="text-neutral-300">GPT-4o</span>
                    </div>
                </div>

                <div class="flex items-center gap-2">
                    <button onclick="chatApp.clearChat()" class="p-2 rounded-lg hover:bg-white/5 text-neutral-400 hover:text-red-400 transition-colors" title="Clear Chat">
                        <i class="fas fa-trash-can"></i>
                    </button>
                    <div class="h-4 w-px bg-white/10 mx-1"></div>
                    <button onclick="chatApp.toggleTheme()" class="p-2 rounded-lg hover:bg-white/5 text-neutral-400 hover:text-amber-400 transition-colors">
                        <i class="fas fa-sun"></i>
                    </button>
                </div>
            </header>

            <!-- Chat Container -->
            <div id="chatWrapper" class="flex-1 overflow-y-auto relative scroll-smooth">
                
                <!-- Hero Section (Empty State) -->
                <div id="heroSection" class="min-h-full flex flex-col items-center justify-center p-6 transition-all duration-500">
                    <div class="w-full max-w-3xl mx-auto space-y-8">
                        
                        <!-- Logo Animation -->
                        <div class="text-center space-y-4 animate-float">
                            <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-amber-500 via-orange-500 to-blue-600 shadow-2xl shadow-amber-500/20 mb-4">
                                <i class="fas fa-robot text-4xl text-white"></i>
                            </div>
                            <h1 class="text-5xl md:text-6xl font-bold text-gradient tracking-tight">How can I help?</h1>
                            <p class="text-neutral-400 text-lg">Advanced AI assistant with vision, voice, and reasoning</p>
                        </div>

                        <!-- Hero Input -->
                        <div class="relative group">
                            <div class="hero-input rounded-2xl p-2 flex flex-col gap-2">
                                <!-- Text Area -->
                                <textarea 
                                    id="heroInput" 
                                    rows="1"
                                    class="w-full bg-transparent border-0 px-4 py-4 text-lg text-white placeholder-neutral-500 resize-none focus:outline-none max-h-48 custom-scrollbar"
                                    placeholder="Ask anything, upload an image, or use voice..."
                                    onkeydown="chatApp.handleKeyDown(event, 'hero')"
                                    oninput="chatApp.autoResize(this)"
                                ></textarea>
                                
                                <!-- Input Actions -->
                                <div class="flex items-center justify-between px-2 pb-1">
                                    <div class="flex items-center gap-1">
                                        <input type="file" id="fileInput" class="hidden" accept="image/*,.txt,.pdf,.js,.py,.html,.css,.json" onchange="chatApp.handleFile(event)">
                                        <button onclick="document.getElementById('fileInput').click()" class="p-2 rounded-lg hover:bg-white/10 text-neutral-400 hover:text-amber-400 transition-all" title="Upload File">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        
                                        <button onclick="chatApp.toggleCamera()" id="cameraBtn" class="p-2 rounded-lg hover:bg-white/10 text-neutral-400 hover:text-blue-400 transition-all" title="Camera">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                        
                                        <button onclick="chatApp.toggleVoice()" id="voiceBtn" class="p-2 rounded-lg hover:bg-white/10 text-neutral-400 hover:text-red-400 transition-all" title="Voice Input">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                    </div>
                                    
                                    <button onclick="chatApp.sendMessage('hero')" id="heroSendBtn" class="px-6 py-2.5 rounded-xl bg-gradient-to-r from-amber-600 to-amber-500 text-white font-medium hover:from-amber-500 hover:to-amber-400 transition-all shadow-lg shadow-amber-500/25 flex items-center gap-2 group">
                                        <span>Send</span>
                                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- File Preview -->
                            <div id="filePreview" class="hidden mt-3 p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3 animate-scale-in">
                                <div class="w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center text-amber-500">
                                    <i class="fas fa-image"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p id="fileName" class="text-sm font-medium truncate">image.jpg</p>
                                    <p class="text-xs text-neutral-500">Ready to upload</p>
                                </div>
                                <button onclick="chatApp.clearFile()" class="p-1.5 rounded-lg hover:bg-white/10 text-neutral-400">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <button onclick="chatApp.quickPrompt('Explain quantum computing in simple terms')" class="p-4 rounded-xl bg-white/5 border border-white/5 hover:border-amber-500/30 hover:bg-white/10 transition-all text-left group">
                                <i class="fas fa-atom text-amber-500 mb-2 text-lg group-hover:scale-110 transition-transform block"></i>
                                <span class="text-sm text-neutral-300">Explain</span>
                            </button>
                            <button onclick="chatApp.quickPrompt('Write a Python function to calculate fibonacci')" class="p-4 rounded-xl bg-white/5 border border-white/5 hover:border-blue-500/30 hover:bg-white/10 transition-all text-left group">
                                <i class="fas fa-code text-blue-500 mb-2 text-lg group-hover:scale-110 transition-transform block"></i>
                                <span class="text-sm text-neutral-300">Code</span>
                            </button>
                            <button onclick="chatApp.quickPrompt('Analyze the pros and cons of renewable energy')" class="p-4 rounded-xl bg-white/5 border border-white/5 hover:border-purple-500/30 hover:bg-white/10 transition-all text-left group">
                                <i class="fas fa-brain text-purple-500 mb-2 text-lg group-hover:scale-110 transition-transform block"></i>
                                <span class="text-sm text-neutral-300">Analyze</span>
                            </button>
                            <button onclick="chatApp.quickPrompt('Create a meal plan for this week')" class="p-4 rounded-xl bg-white/5 border border-white/5 hover:border-green-500/30 hover:bg-white/10 transition-all text-left group">
                                <i class="fas fa-lightbulb text-green-500 mb-2 text-lg group-hover:scale-110 transition-transform block"></i>
                                <span class="text-sm text-neutral-300">Create</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Messages Area -->
                <div id="messagesArea" class="hidden max-w-4xl mx-auto p-4 md:p-8 space-y-6 pb-32">
                    <!-- Messages will appear here -->
                </div>

                <!-- Bottom Input (Active Chat) -->
                <div id="bottomInput" class="hidden fixed bottom-0 left-0 md:left-80 right-0 glass border-t border-white/10 p-4 z-30 animate-slide-up">
                    <div class="max-w-4xl mx-auto">
                        <div class="bottom-input rounded-2xl p-2 flex items-end gap-2">
                            <button onclick="document.getElementById('fileInput').click()" class="p-3 rounded-xl hover:bg-white/10 text-neutral-400 hover:text-amber-400 transition-colors">
                                <i class="fas fa-plus"></i>
                            </button>
                            
                            <textarea 
                                id="bottomInputField"
                                rows="1"
                                class="flex-1 bg-transparent border-0 px-2 py-3 text-neutral-200 placeholder-neutral-500 resize-none focus:outline-none max-h-32 custom-scrollbar"
                                placeholder="Message Nexus AI..."
                                onkeydown="chatApp.handleKeyDown(event, 'bottom')"
                                oninput="chatApp.autoResize(this)"
                            ></textarea>
                            
                            <div class="flex items-center gap-1 pb-1">
                                <button onclick="chatApp.toggleVoice()" class="p-2 rounded-lg hover:bg-white/10 text-neutral-400 hover:text-red-400 transition-colors">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button onclick="chatApp.stopGeneration()" id="stopGenBtn" class="hidden p-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30">
                                    <i class="fas fa-stop"></i>
                                </button>
                                <button onclick="chatApp.sendMessage('bottom')" id="bottomSendBtn" class="p-2.5 rounded-xl bg-gradient-to-r from-amber-600 to-amber-500 text-white hover:from-amber-500 hover:to-amber-400 transition-all shadow-lg shadow-amber-500/20">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        <p class="text-center text-xs text-neutral-600 mt-2">
                            Nexus AI can make mistakes. Consider checking important information.
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Camera Modal -->
        <div id="cameraModal" class="hidden fixed inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center p-4">
            <div class="bg-dark-800 rounded-2xl w-full max-w-2xl overflow-hidden border border-white/10 shadow-2xl">
                <div class="p-4 border-b border-white/10 flex justify-between items-center">
                    <h3 class="font-semibold">Camera</h3>
                    <button onclick="chatApp.closeCamera()" class="text-neutral-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="relative aspect-video bg-black">
                    <video id="cameraVideo" class="w-full h-full object-cover" autoplay playsinline></video>
                    <canvas id="cameraCanvas" class="hidden"></canvas>
                </div>
                <div class="p-4 flex justify-center gap-4">
                    <button onclick="chatApp.capturePhoto()" class="w-14 h-14 rounded-full bg-white flex items-center justify-center hover:scale-105 transition-transform">
                        <div class="w-12 h-12 rounded-full border-2 border-dark-800"></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Voice Visualizer -->
        <div id="voiceVisualizer" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center">
            <div class="text-center space-y-6">
                <div class="voice-wave justify-center h-16 gap-1">
                    <div class="voice-bar h-4 w-1.5 rounded-full bg-amber-500"></div>
                    <div class="voice-bar h-8 w-1.5 rounded-full bg-amber-500"></div>
                    <div class="voice-bar h-12 w-1.5 rounded-full bg-amber-500"></div>
                    <div class="voice-bar h-6 w-1.5 rounded-full bg-amber-500"></div>
                    <div class="voice-bar h-10 w-1.5 rounded-full bg-amber-500"></div>
                    <div class="voice-bar h-4 w-1.5 rounded-full bg-amber-500"></div>
                </div>
                <p class="text-neutral-400 animate-pulse">Listening...</p>
                <button onclick="chatApp.stopVoice()" class="px-6 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors">
                    Stop
                </button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
            <div class="glass-strong rounded-2xl w-full max-w-lg p-6 space-y-6 border border-white/10 shadow-2xl animate-scale-in">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Settings</h3>
                    <button onclick="chatApp.toggleSettings()" class="text-neutral-400 hover:text-white">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>

                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-neutral-400 mb-2">AI Model</label>
                        <select id="modelSelect" class="w-full bg-dark-900 border border-white/10 rounded-xl px-4 py-3 text-sm focus:border-amber-500 focus:outline-none transition-colors" onchange="chatApp.changeModel(this.value)">
                            <option value="openai">GPT-4o (Most Capable)</option>
                            <option value="mistral-large">Mistral Large (Fast)</option>
                            <option value="llama-3.1-70b">Llama 3.1 70B (Open)</option>
                            <option value="claude">Claude 3.5 (Precise)</option>
                            <option value="gemini">Gemini Pro (Multimodal)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-neutral-400 mb-2">System Instructions</label>
                        <textarea id="systemPrompt" rows="4" class="w-full bg-dark-900 border border-white/10 rounded-xl px-4 py-3 text-sm focus:border-amber-500 focus:outline-none custom-scrollbar" placeholder="You are a helpful assistant..."></textarea>
                    </div>

                    <div class="flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/5">
                        <div>
                            <p class="font-medium">Auto-Speak Responses</p>
                            <p class="text-xs text-neutral-500">Read AI responses aloud</p>
                        </div>
                        <button onclick="chatApp.toggleTTS()" id="ttsBtn" class="w-12 h-6 rounded-full bg-dark-600 relative transition-colors">
                            <span class="absolute left-1 top-1 w-4 h-4 rounded-full bg-white transition-transform"></span>
                        </button>
                    </div>
                </div>

                <button onclick="chatApp.saveSettings()" class="w-full py-3 rounded-xl bg-gradient-to-r from-amber-600 to-amber-500 text-white font-semibold hover:from-amber-500 hover:to-amber-400 transition-all shadow-lg shadow-amber-500/20">
                    Save Changes
                </button>
            </div>
        </div>

        <!-- Overlay -->
        <div id="overlay" onclick="chatApp.closeAllModals()" class="hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden"></div>
    </div>

    <script>
        class NexusAI {
            constructor() {
                this.conversations = JSON.parse(localStorage.getItem('nexus_chat_history')) || [];
                this.currentId = null;
                this.settings = JSON.parse(localStorage.getItem('nexus_settings')) || {
                    model: 'openai',
                    systemPrompt: 'You are Nexus AI, an advanced intelligent assistant. Provide comprehensive, accurate, and thoughtful responses. You can analyze images, write code, and engage in complex reasoning.',
                    ttsEnabled: false
                };
                this.isGenerating = false;
                this.currentFile = null;
                this.mediaStream = null;
                this.recognition = null;
                this.synth = window.speechSynthesis;
                
                this.init();
            }

            init() {
                this.setupVoiceRecognition();
                this.setupMarked();
                this.loadSettings();
                this.renderHistory();
                
                // Focus hero input on load
                setTimeout(() => document.getElementById('heroInput')?.focus(), 100);
                
                // Setup resize observer for smooth transitions
                window.addEventListener('resize', () => {
                    if (window.innerWidth >= 768) {
                        document.getElementById('sidebar').classList.remove('-translate-x-full');
                        document.getElementById('overlay').classList.add('hidden');
                    }
                });
            }

            setupMarked() {
                marked.setOptions({
                    highlight: (code, lang) => {
                        const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                        return hljs.highlight(code, { language }).value;
                    },
                    langPrefix: 'hljs language-',
                    breaks: true,
                    gfm: true
                });

                const renderer = new marked.Renderer();
                renderer.code = (code, language) => {
                    const validLang = hljs.getLanguage(language) ? language : 'text';
                    return `
                        <div class="code-block my-4">
                            <div class="code-header">
                                <span class="text-xs text-neutral-400 uppercase font-mono">${validLang}</span>
                                <button onclick="chatApp.copyCode(this)" class="text-xs text-neutral-400 hover:text-white flex items-center gap-1.5 transition-colors">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                            <div class="code-content">
                                <pre class="custom-scrollbar"><code class="hljs language-${validLang}">${hljs.highlight(code, {language: validLang}).value}</code></pre>
                            </div>
                        </div>
                    `;
                };
                renderer.image = (href, title, text) => {
                    return `<img src="${href}" alt="${text}" class="rounded-xl max-w-full h-auto my-4 border border-white/10" loading="lazy">`;
                };
                marked.use({ renderer });
            }

            setupVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    this.recognition.continuous = true;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'en-US';
                    
                    this.recognition.onresult = (event) => {
                        let finalTranscript = '';
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            if (event.results[i].isFinal) {
                                finalTranscript += event.results[i][0].transcript;
                            }
                        }
                        if (finalTranscript) {
                            const hero = document.getElementById('heroInput');
                            const bottom = document.getElementById('bottomInputField');
                            if (!document.getElementById('heroSection').classList.contains('hidden')) {
                                hero.value += finalTranscript;
                                this.autoResize(hero);
                            } else {
                                bottom.value += finalTranscript;
                                this.autoResize(bottom);
                            }
                        }
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Voice error:', event.error);
                        this.stopVoice();
                    };
                }
            }

            // Navigation & UI
            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('overlay');
                const isHidden = sidebar.classList.contains('-translate-x-full');
                
                if (isHidden) {
                    sidebar.classList.remove('-translate-x-full');
                    overlay.classList.remove('hidden');
                } else {
                    sidebar.classList.add('-translate-x-full');
                    overlay.classList.add('hidden');
                }
            }

            toggleSettings() {
                const modal = document.getElementById('settingsModal');
                const isHidden = modal.classList.contains('hidden');
                
                if (isHidden) {
                    modal.classList.remove('hidden');
                    document.getElementById('systemPrompt').value = this.settings.systemPrompt;
                } else {
                    modal.classList.add('hidden');
                }
            }

            closeAllModals() {
                document.getElementById('settingsModal').classList.add('hidden');
                document.getElementById('cameraModal').classList.add('hidden');
                this.toggleSidebar();
            }

            // Chat Management
            newChat() {
                this.currentId = null;
                this.currentFile = null;
                document.getElementById('heroInput').value = '';
                document.getElementById('bottomInputField').value = '';
                document.getElementById('filePreview').classList.add('hidden');
                
                // Reset UI to hero state with animation
                const hero = document.getElementById('heroSection');
                const messages = document.getElementById('messagesArea');
                const bottom = document.getElementById('bottomInput');
                
                hero.classList.remove('hidden');
                messages.classList.add('hidden');
                messages.innerHTML = '';
                bottom.classList.add('hidden');
                
                // Focus hero input
                setTimeout(() => document.getElementById('heroInput').focus(), 300);
                
                if (window.innerWidth < 768) this.toggleSidebar();
            }

            loadChat(id) {
                const chat = this.conversations.find(c => c.id === id);
                if (!chat) return;
                
                this.currentId = id;
                this.renderMessages(chat.messages);
                this.switchToChatMode();
                if (window.innerWidth < 768) this.toggleSidebar();
            }

            deleteChat(id, event) {
                event.stopPropagation();
                this.conversations = this.conversations.filter(c => c.id !== id);
                localStorage.setItem('nexus_chat_history', JSON.stringify(this.conversations));
                this.renderHistory();
                if (this.currentId === id) this.newChat();
            }

            clearChat() {
                if (this.currentId) {
                    const chat = this.conversations.find(c => c.id === this.currentId);
                    if (chat) {
                        chat.messages = [];
                        localStorage.setItem('nexus_chat_history', JSON.stringify(this.conversations));
                        this.renderMessages([]);
                    }
                }
            }

            renderHistory() {
                const container = document.getElementById('historyList');
                container.innerHTML = '';
                
                this.conversations.forEach(chat => {
                    const div = document.createElement('button');
                    div.className = `sidebar-item w-full text-left p-3 rounded-xl flex items-center gap-3 mb-1 ${this.currentId === chat.id ? 'active' : ''}`;
                    div.onclick = () => this.loadChat(chat.id);
                    
                    const title = chat.messages[0]?.content.substring(0, 30) + '...' || 'New Chat';
                    const date = new Date(chat.timestamp).toLocaleDateString();
                    
                    div.innerHTML = `
                        <i class="fas fa-message text-neutral-500 ${this.currentId === chat.id ? 'text-amber-500' : ''}"></i>
                        <div class="flex-1 min-w-0">
                            <p class="text-sm font-medium text-neutral-200 truncate">${chat.title || title}</p>
                            <p class="text-xs text-neutral-600">${date}</p>
                        </div>
                        <button onclick="chatApp.deleteChat('${chat.id}', event)" class="opacity-0 group-hover:opacity-100 p-1.5 hover:text-red-400 transition-opacity">
                            <i class="fas fa-trash-alt text-xs"></i>
                        </button>
                    `;
                    container.appendChild(div);
                });
            }

            // Input Handling
            autoResize(textarea) {
                textarea.style.height = 'auto';
                textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
            }

            handleKeyDown(e, source) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    this.sendMessage(source);
                }
            }

            quickPrompt(text) {
                document.getElementById('heroInput').value = text;
                this.autoResize(document.getElementById('heroInput'));
                this.sendMessage('hero');
            }

            // File & Camera
            handleFile(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                this.currentFile = file;
                const preview = document.getElementById('filePreview');
                const name = document.getElementById('fileName');
                const icon = preview.querySelector('i');
                
                name.textContent = file.name;
                
                if (file.type.startsWith('image/')) {
                    icon.className = 'fas fa-image';
                    preview.querySelector('div').className = 'w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-500';
                } else {
                    icon.className = 'fas fa-file';
                    preview.querySelector('div').className = 'w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center text-amber-500';
                }
                
                preview.classList.remove('hidden');
            }

            clearFile() {
                this.currentFile = null;
                document.getElementById('fileInput').value = '';
                document.getElementById('filePreview').classList.add('hidden');
            }

            async toggleCamera() {
                const modal = document.getElementById('cameraModal');
                const video = document.getElementById('cameraVideo');
                
                if (modal.classList.contains('hidden')) {
                    try {
                        this.mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });
                        video.srcObject = this.mediaStream;
                        modal.classList.remove('hidden');
                    } catch (err) {
                        this.showToast('Camera access denied', 'error');
                    }
                } else {
                    this.closeCamera();
                }
            }

            closeCamera() {
                const modal = document.getElementById('cameraModal');
                const video = document.getElementById('cameraVideo');
                
                if (this.mediaStream) {
                    this.mediaStream.getTracks().forEach(track => track.stop());
                    this.mediaStream = null;
                }
                video.srcObject = null;
                modal.classList.add('hidden');
            }

            capturePhoto() {
                const video = document.getElementById('cameraVideo');
                const canvas = document.getElementById('cameraCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                ctx.drawImage(video, 0, 0);
                
                canvas.toBlob(blob => {
                    const file = new File([blob], "camera-photo.jpg", { type: "image/jpeg" });
                    this.currentFile = file;
                    document.getElementById('filePreview').classList.remove('hidden');
                    document.getElementById('fileName').textContent = 'Camera Photo';
                    this.closeCamera();
                    this.showToast('Photo captured');
                }, 'image/jpeg');
            }

            // Voice
            toggleVoice() {
                if (!this.recognition) {
                    this.showToast('Voice not supported in this browser', 'error');
                    return;
                }
                
                const visualizer = document.getElementById('voiceVisualizer');
                const isActive = !visualizer.classList.contains('hidden');
                
                if (isActive) {
                    this.stopVoice();
                } else {
                    this.recognition.start();
                    visualizer.classList.remove('hidden');
                    
                    // Animate bars
                    const bars = visualizer.querySelectorAll('.voice-bar');
                    const animate = () => {
                        if (visualizer.classList.contains('hidden')) return;
                        bars.forEach(bar => {
                            const height = Math.random() * 40 + 10;
                            bar.style.height = height + 'px';
                        });
                        requestAnimationFrame(animate);
                    };
                    animate();
                }
            }

            stopVoice() {
                if (this.recognition) this.recognition.stop();
                document.getElementById('voiceVisualizer').classList.add('hidden');
            }

            // Message Sending & Streaming
            async sendMessage(source) {
                const inputEl = source === 'hero' ? document.getElementById('heroInput') : document.getElementById('bottomInputField');
                const text = inputEl.value.trim();
                
                if (!text && !this.currentFile) return;
                if (this.isGenerating) return;
                
                // Create new chat if needed
                if (!this.currentId) {
                    this.currentId = Date.now().toString();
                    this.conversations.unshift({
                        id: this.currentId,
                        title: text.substring(0, 40) + (text.length > 40 ? '...' : ''),
                        messages: [],
                        timestamp: Date.now()
                    });
                }
                
                const chat = this.conversations.find(c => c.id === this.currentId);
                
                // Add user message
                const userMsg = {
                    role: 'user',
                    content: text,
                    file: this.currentFile ? await this.fileToBase64(this.currentFile) : null,
                    timestamp: Date.now()
                };
                
                chat.messages.push(userMsg);
                this.saveConversations();
                
                // Clear input
                inputEl.value = '';
                inputEl.style.height = 'auto';
                this.clearFile();
                
                // Switch to chat mode if in hero
                if (source === 'hero') {
                    this.switchToChatMode();
                }
                
                this.renderMessages(chat.messages);
                await this.generateResponse(chat);
            }

            switchToChatMode() {
                document.getElementById('heroSection').classList.add('hidden');
                document.getElementById('messagesArea').classList.remove('hidden');
                document.getElementById('bottomInput').classList.remove('hidden');
            }

            async fileToBase64(file) {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onloadend = () => resolve(reader.result);
                    reader.readAsDataURL(file);
                });
            }

            async generateResponse(chat) {
                this.isGenerating = true;
                this.updateUIState();
                
                const msgId = Date.now().toString();
                const loadingMsg = {
                    id: msgId,
                    role: 'assistant',
                    content: '',
                    loading: true,
                    timestamp: Date.now()
                };
                
                chat.messages.push(loadingMsg);
                this.renderMessages(chat.messages);
                
                try {
                    // Prepare messages for API
                    const apiMessages = [
                        { role: 'system', content: this.settings.systemPrompt },
                        ...chat.messages.slice(0, -1).map(m => ({
                            role: m.role,
                            content: m.file ? `[Image attached] ${m.content}` : m.content
                        }))
                    ];

                    // If there's an image, we need to use the image API
                    let response;
                    const lastUserMsg = chat.messages[chat.messages.length - 2];
                    
                    if (lastUserMsg?.file) {
                        // Use image generation/analysis if it's an image input
                        response = await fetch('https://image.pollinations.ai/prompt/' + encodeURIComponent(lastUserMsg.content || 'Analyze this'), {
                            method: 'GET'
                        });
                        // For now, treat as text with image context
                    }

                    // Text generation
                    const textResponse = await fetch('https://text.pollinations.ai/', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            messages: apiMessages,
                            model: this.settings.model,
                            seed: Math.floor(Math.random() * 1000),
                            stream: true
                        })
                    });

                    if (!textResponse.ok) throw new Error('API Error');
                    
                    const reader = textResponse.body.getReader();
                    const decoder = new TextDecoder();
                    let fullText = '';
                    
                    while (true) {
                        const { done, value } = await reader.read();
                        if (done) break;
                        
                        const chunk = decoder.decode(value);
                        fullText += chunk;
                        
                        // Update message with streaming text
                        const msgIndex = chat.messages.findIndex(m => m.id === msgId);
                        if (msgIndex !== -1) {
                            chat.messages[msgIndex].content = fullText;
                            chat.messages[msgIndex].loading = false;
                            this.updateMessageContent(msgId, fullText);
                        }
                    }
                    
                    // Save final
                    this.saveConversations();
                    this.renderHistory();
                    
                    // TTS
                    if (this.settings.ttsEnabled) {
                        this.speak(fullText);
                    }
                    
                } catch (error) {
                    console.error(error);
                    const msgIndex = chat.messages.findIndex(m => m.id === msgId);
                    if (msgIndex !== -1) {
                        chat.messages[msgIndex].content = 'Sorry, I encountered an error. Please try again.';
                        chat.messages[msgIndex].loading = false;
                        chat.messages[msgIndex].error = true;
                        this.renderMessages(chat.messages);
                    }
                } finally {
                    this.isGenerating = false;
                    this.updateUIState();
                }
            }

            updateMessageContent(id, content) {
                const el = document.getElementById(`msg-${id}`);
                if (el) {
                    const contentDiv = el.querySelector('.message-content');
                    if (contentDiv) {
                        contentDiv.innerHTML = marked.parse(content);
                        // Highlight code
                        contentDiv.querySelectorAll('pre code').forEach(block => {
                            hljs.highlightElement(block);
                        });
                    }
                }
                this.scrollToBottom();
            }

            renderMessages(messages) {
                const container = document.getElementById('messagesArea');
                
                if (messages.length === 0) {
                    container.innerHTML = '';
                    return;
                }
                
                container.innerHTML = messages.map((msg, idx) => {
                    const isLast = idx === messages.length - 1;
                    
                    if (msg.role === 'user') {
                        return `
                            <div id="msg-${msg.id || idx}" class="message-appear flex justify-end mb-6">
                                <div class="max-w-[85%] md:max-w-[75%] bg-gradient-to-r from-amber-600 to-orange-600 rounded-2xl rounded-tr-sm px-5 py-3.5 shadow-lg shadow-amber-900/20">
                                    ${msg.file ? `<img src="${msg.file}" class="rounded-lg mb-2 max-h-48 object-cover">` : ''}
                                    <p class="text-white text-[15px] leading-relaxed">${msg.content}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div id="msg-${msg.id || idx}" class="message-appear flex justify-start mb-6">
                                <div class="flex gap-4 max-w-[95%] md:max-w-[90%]">
                                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0 mt-1 shadow-lg">
                                        <i class="fas fa-robot text-white text-xs"></i>
                                    </div>
                                    <div class="flex-1 space-y-2">
                                        <div class="message-content prose prose-invert max-w-none ${msg.loading ? 'min-w-[200px]' : ''}">
                                            ${msg.loading ? `
                                                <div class="typing-wave">
                                                    <div class="typing-bar"></div>
                                                    <div class="typing-bar"></div>
                                                    <div class="typing-bar"></div>
                                                    <div class="typing-bar"></div>
                                                </div>
                                            ` : marked.parse(msg.content)}
                                        </div>
                                        ${!msg.loading ? `
                                            <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                                <button onclick="chatApp.copyMessage('${msg.id || idx}')" class="text-xs text-neutral-500 hover:text-amber-400 flex items-center gap-1">
                                                    <i class="fas fa-copy"></i> Copy
                                                </button>
                                                <button onclick="chatApp.speak('${msg.content.replace(/'/g, "\\'")}')" class="text-xs text-neutral-500 hover:text-blue-400 flex items-center gap-1">
                                                    <i class="fas fa-volume-up"></i> Read
                                                </button>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                }).join('');
                
                // Highlight all code blocks
                container.querySelectorAll('pre code').forEach(block => {
                    hljs.highlightElement(block);
                });
                
                if (messages.length > 0) {
                    this.scrollToBottom();
                }
            }

            scrollToBottom() {
                const container = document.getElementById('chatWrapper');
                container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
            }

            // Utilities
            updateUIState() {
                const stopBtn = document.getElementById('stopGenBtn');
                const sendBtns = [document.getElementById('heroSendBtn'), document.getElementById('bottomSendBtn')];
                
                if (this.isGenerating) {
                    stopBtn.classList.remove('hidden');
                    sendBtns.forEach(btn => btn?.classList.add('opacity-50', 'pointer-events-none'));
                } else {
                    stopBtn.classList.add('hidden');
                    sendBtns.forEach(btn => btn?.classList.remove('opacity-50', 'pointer-events-none'));
                }
            }

            stopGeneration() {
                this.isGenerating = false;
                this.updateUIState();
                // Note: Can't actually abort fetch without AbortController, but we can stop UI
            }

            copyCode(btn) {
                const code = btn.closest('.code-block').querySelector('code').innerText;
                navigator.clipboard.writeText(code);
                btn.innerHTML = '<i class="fas fa-check"></i> Copied';
                setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i> Copy', 2000);
            }

            copyMessage(id) {
                const msg = document.getElementById(`msg-${id}`);
                const text = msg.innerText;
                navigator.clipboard.writeText(text);
                this.showToast('Copied to clipboard');
            }

            speak(text) {
                if (this.synth.speaking) this.synth.cancel();
                
                // Strip markdown
                const cleanText = text.replace(/[#*`[\]<>]/g, '').replace(/\((.*?)\)/g, '$1');
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.rate = 1;
                utterance.pitch = 1;
                this.synth.speak(utterance);
            }

            toggleTTS() {
                this.settings.ttsEnabled = !this.settings.ttsEnabled;
                const btn = document.getElementById('ttsBtn');
                const dot = btn.querySelector('span');
                
                if (this.settings.ttsEnabled) {
                    btn.classList.remove('bg-dark-600');
                    btn.classList.add('bg-amber-500');
                    dot.classList.add('translate-x-6');
                } else {
                    btn.classList.add('bg-dark-600');
                    btn.classList.remove('bg-amber-500');
                    dot.classList.remove('translate-x-6');
                }
                this.saveSettings();
            }

            changeModel(model) {
                this.settings.model = model;
                document.getElementById('modelBadge').innerHTML = `
                    <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                    <span class="text-neutral-300">${model}</span>
                `;
                this.saveSettings();
            }

            saveSettings() {
                this.settings.systemPrompt = document.getElementById('systemPrompt').value;
                localStorage.setItem('nexus_settings', JSON.stringify(this.settings));
                this.toggleSettings();
                this.showToast('Settings saved');
            }

            loadSettings() {
                document.getElementById('modelSelect').value = this.settings.model;
                document.getElementById('modelBadge').innerHTML = `
                    <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                    <span class="text-neutral-300">${this.settings.model}</span>
                `;
                if (this.settings.ttsEnabled) {
                    document.getElementById('ttsBtn').classList.remove('bg-dark-600');
                    document.getElementById('ttsBtn').classList.add('bg-amber-500');
                    document.getElementById('ttsBtn').querySelector('span').classList.add('translate-x-6');
                }
            }

            exportChat() {
                if (!this.currentId) return;
                const chat = this.conversations.find(c => c.id === this.currentId);
                if (!chat || chat.messages.length === 0) return;
                
                let md = `# ${chat.title}\n\n`;
                chat.messages.forEach(m => {
                    md += `### ${m.role === 'user' ? 'User' : 'Assistant'}\n${m.content}\n\n`;
                });
                
                const blob = new Blob([md], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `nexus-chat-${chat.id}.md`;
                a.click();
                this.showToast('Chat exported');
            }

            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `fixed top-20 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-full text-sm font-medium shadow-2xl z-50 animate-fade-in ${
                    type === 'error' ? 'bg-red-500/20 text-red-400 border border-red-500/20' : 'bg-amber-500/20 text-amber-400 border border-amber-500/20'
                } backdrop-blur-md`;
                toast.textContent = message;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
            }

            toggleTheme() {
                // Placeholder for theme toggle - currently dark only
                this.showToast('Light mode coming soon');
            }
        }

        const chatApp = new NexusAI();
    </script>
</body>
</html>
