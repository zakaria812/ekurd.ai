<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KurdiChat - Free AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d0d0d;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #252525;
            --text-primary: #e8e8e8;
            --text-secondary: #a0a0a0;
            --accent: #10a37f;
            --accent-hover: #0d8c6d;
            --border: #2d2d2d;
            --user-msg: #1f4d3f;
            --ai-msg: #252525;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Header - Classic Minimal */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent), #0d8c6d);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .btn-icon:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--accent);
        }

        /* Model Selector */
        .model-selector {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 10px 20px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .model-selector::-webkit-scrollbar {
            display: none;
        }

        .model-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 6px 14px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .model-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .model-btn:hover:not(.active) {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            scroll-behavior: smooth;
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            gap: 24px;
            opacity: 1;
            transition: opacity 0.3s;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .welcome-icon {
            width: 80px;
            height: 80px;
            background: var(--bg-secondary);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 1px solid var(--border);
        }

        .welcome-text h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-text p {
            color: var(--text-secondary);
            font-size: 16px;
            max-width: 500px;
            line-height: 1.6;
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            max-width: 600px;
            margin-top: 20px;
        }

        .chip {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chip:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        /* Messages */
        .message {
            display: flex;
            gap: 16px;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        .user-avatar {
            background: var(--accent);
            color: white;
        }

        .ai-avatar {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--accent);
        }

        .message-content {
            flex: 1;
            padding: 12px 16px;
            border-radius: 16px;
            line-height: 1.6;
            font-size: 15px;
            overflow-wrap: break-word;
        }

        .user-message .message-content {
            background: var(--user-msg);
            border: 1px solid #2d5a4a;
        }

        .ai-message .message-content {
            background: var(--ai-msg);
            border: 1px solid var(--border);
        }

        .message-content p {
            margin-bottom: 12px;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .message-content pre {
            background: var(--bg-primary);
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 12px 0;
            border: 1px solid var(--border);
        }

        .message-content code {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            background: rgba(255,255,255,0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .message-content pre code {
            background: transparent;
            padding: 0;
        }

        .message-content ul, .message-content ol {
            margin: 12px 0;
            padding-left: 24px;
        }

        .message-content li {
            margin: 6px 0;
        }

        .message-content strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .action-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .action-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* Typing Indicator */
        .typing {
            display: flex;
            gap: 4px;
            padding: 16px;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        /* Input Area */
        .input-container {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 16px 20px 20px;
            position: relative;
        }

        .input-wrapper {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 16px;
            display: flex;
            align-items: flex-end;
            gap: 12px;
            padding: 12px;
            transition: border-color 0.2s;
        }

        .input-wrapper:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(16, 163, 127, 0.1);
        }

        textarea {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 15px;
            resize: none;
            outline: none;
            min-height: 24px;
            max-height: 200px;
            font-family: inherit;
            line-height: 1.5;
        }

        textarea::placeholder {
            color: var(--text-secondary);
        }

        .input-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .send-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-size: 16px;
        }

        .send-btn:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: scale(1.05);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .attach-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .attach-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .input-footer {
            max-width: 900px;
            margin: 8px auto 0;
            text-align: center;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .input-footer a {
            color: var(--accent);
            text-decoration: none;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3d3d3d;
        }

        /* Loading State */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 10px 16px;
            }

            .chat-container {
                padding: 16px;
            }

            .message {
                gap: 12px;
            }

            .message-avatar {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .welcome-text h1 {
                font-size: 24px;
            }

            .suggestion-chips {
                padding: 0 20px;
            }

            .chip {
                font-size: 13px;
                padding: 8px 12px;
            }
        }

        /* Markdown-like styling */
        .message-content h1, .message-content h2, .message-content h3 {
            margin: 16px 0 12px;
            color: var(--text-primary);
        }

        .message-content h1 { font-size: 24px; }
        .message-content h2 { font-size: 20px; }
        .message-content h3 { font-size: 18px; }

        .message-content blockquote {
            border-left: 3px solid var(--accent);
            padding-left: 16px;
            margin: 12px 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        .message-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .message-content th, .message-content td {
            border: 1px solid var(--border);
            padding: 8px 12px;
            text-align: left;
        }

        .message-content th {
            background: var(--bg-secondary);
            font-weight: 600;
        }

        /* Error message */
        .error-message {
            background: #3d1f1f;
            border: 1px solid #5c2e2e;
            color: #ff6b6b;
            padding: 12px 16px;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-icon">‚óâ</div>
            <span>KurdiChat</span>
        </div>
        <div class="header-actions">
            <button class="btn-icon" onclick="clearChat()" title="New Chat">+ New</button>
            <button class="btn-icon" onclick="exportChat()" title="Export">‚¨á</button>
        </div>
    </div>

    <div class="model-selector">
        <button class="model-btn active" data-model="openai">GPT-4o</button>
        <button class="model-btn" data-model="claude">Claude 3.5</button>
        <button class="model-btn" data-model="gemini">Gemini Pro</button>
        <button class="model-btn" data-model="deepseek">DeepSeek V3</button>
        <button class="model-btn" data-model="mistral">Mistral Large</button>
        <button class="model-btn" data-model="qwen-coder">Qwen Coder</button>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="welcome-screen" id="welcomeScreen">
            <div class="welcome-icon">‚óâ</div>
            <div class="welcome-text">
                <h1>How can I help you today?</h1>
                <p>Powered by Pollinations.ai - Completely free, no API keys needed. Ask me anything: coding, analysis, creative writing, research, or just chat.</p>
            </div>
            <div class="suggestion-chips">
                <div class="chip" onclick="sendQuickMessage('Explain quantum computing in simple terms')">
                    <span>‚öõÔ∏è</span> Explain quantum computing
                </div>
                <div class="chip" onclick="sendQuickMessage('Write a Python script to automate file organization')">
                    <span>üêç</span> Python automation script
                </div>
                <div class="chip" onclick="sendQuickMessage('Compare React vs Vue for a new project')">
                    <span>‚ö°</span> React vs Vue comparison
                </div>
                <div class="chip" onclick="sendQuickMessage('Help me debug this code...')">
                    <span>üêõ</span> Debug my code
                </div>
                <div class="chip" onclick="sendQuickMessage('Write a professional email requesting time off')">
                    <span>‚úâÔ∏è</span> Professional email
                </div>
                <div class="chip" onclick="sendQuickMessage('Analyze the themes in 1984 by Orwell')">
                    <span>üìö</span> Literature analysis
                </div>
            </div>
        </div>
    </div>

    <div class="input-container">
        <div class="input-wrapper">
            <button class="attach-btn" title="Attach file (coming soon)">üìé</button>
            <textarea 
                id="messageInput" 
                placeholder="Message KurdiChat..." 
                rows="1"
                onkeydown="handleKeyDown(event)"
                oninput="autoResize(this)"
            ></textarea>
            <div class="input-actions">
                <button class="send-btn" id="sendBtn" onclick="sendMessage()" disabled>‚û§</button>
            </div>
        </div>
        <div class="input-footer">
            Free AI powered by <a href="https://pollinations.ai" target="_blank">Pollinations.ai</a> ‚Ä¢ No signup required
        </div>
    </div>

    <script>
        let currentModel = 'openai';
        let conversationHistory = [];
        let isGenerating = false;

        // Model selection
        document.querySelectorAll('.model-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.model-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentModel = btn.dataset.model;
            });
        });

        // Auto-resize textarea
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
            
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = textarea.value.trim().length === 0;
        }

        // Handle Enter key
        function handleKeyDown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }

        // Send quick message from chips
        function sendQuickMessage(text) {
            document.getElementById('messageInput').value = text;
            autoResize(document.getElementById('messageInput'));
            sendMessage();
        }

        // Format message content (basic markdown)
        function formatContent(text) {
            // Escape HTML
            text = text.replace(/&/g, '&amp;')
                       .replace(/</g, '&lt;')
                       .replace(/>/g, '&gt;');

            // Code blocks
            text = text.replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>');
            
            // Inline code
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            
            // Bold
            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/__(.*?)__/g, '<strong>$1</strong>');
            
            // Italic
            text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
            text = text.replace(/_(.*?)_/g, '<em>$1</em>');
            
            // Headers
            text = text.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            text = text.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            text = text.replace(/^# (.*$)/gim, '<h1>$1</h1>');
            
            // Lists
            text = text.replace(/^\s*\d+\.\s+(.*$)/gim, '<li>$1</li>');
            text = text.replace(/^\s*[\-\*]\s+(.*$)/gim, '<li>$1</li>');
            
            // Wrap lists
            if (text.includes('<li>')) {
                text = text.replace(/(<li>.*<\/li>\n?)+/g, '<ul>$&</ul>');
            }
            
            // Blockquotes
            text = text.replace(/^>\s+(.*$)/gim, '<blockquote>$1</blockquote>');
            
            // Line breaks
            text = text.replace(/\n/g, '<br>');
            
            return text;
        }

        // Add message to chat
        function addMessage(content, isUser = false) {
            const container = document.getElementById('chatContainer');
            const welcomeScreen = document.getElementById('welcomeScreen');
            
            if (welcomeScreen && !welcomeScreen.classList.contains('hidden')) {
                welcomeScreen.classList.add('hidden');
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const avatar = isUser ? 'You' : 'AI';
            const avatarClass = isUser ? 'user-avatar' : 'ai-avatar';
            
            messageDiv.innerHTML = `
                <div class="message-avatar ${avatarClass}">${avatar}</div>
                <div class="message-content">${isUser ? content : formatContent(content)}</div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
            
            return messageDiv;
        }

        // Show typing indicator
        function showTyping() {
            const container = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-avatar ai-avatar">AI</div>
                <div class="message-content">
                    <div class="typing">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
            return typingDiv;
        }

        // Remove typing indicator
        function removeTyping() {
            const typing = document.querySelector('.typing-indicator');
            if (typing) typing.remove();
        }

        // Send message
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const message = input.value.trim();
            
            if (!message || isGenerating) return;
            
            // Add user message
            addMessage(message, true);
            conversationHistory.push({ role: 'user', content: message });
            
            // Clear input
            input.value = '';
            input.style.height = 'auto';
            sendBtn.disabled = true;
            
            // Show typing
            isGenerating = true;
            const typing = showTyping();
            
            try {
                // Prepare messages for API
                const messages = [
                    {
                        role: 'system',
                        content: 'You are KurdiChat, a helpful AI assistant powered by Pollinations.ai. You provide detailed, accurate, and helpful responses to all types of questions including coding, analysis, creative writing, research, math, science, history, and general knowledge. You format your responses using markdown when appropriate (code blocks, lists, bold text). Be thorough but concise.'
                    },
                    ...conversationHistory.map(msg => ({
                        role: msg.role,
                        content: msg.content
                    }))
                ];
                
                // Call Pollinations API
                const response = await fetch('https://text.pollinations.ai/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        messages: messages,
                        model: currentModel,
                        seed: Math.floor(Math.random() * 1000000),
                        jsonMode: false,
                        private: true,
                        stream: false
                    })
                });
                
                removeTyping();
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.text();
                
                // Add AI response
                addMessage(data, false);
                conversationHistory.push({ role: 'assistant', content: data });
                
                // Limit history to last 20 messages to prevent token limit
                if (conversationHistory.length > 20) {
                    conversationHistory = conversationHistory.slice(-20);
                }
                
            } catch (error) {
                removeTyping();
                console.error('Error:', error);
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'message ai-message';
                errorDiv.innerHTML = `
                    <div class="message-avatar ai-avatar">!</div>
                    <div class="message-content">
                        <div class="error-message">
                            Sorry, I encountered an error. Please try again in a moment. 
                            <br><small>${error.message}</small>
                        </div>
                    </div>
                `;
                document.getElementById('chatContainer').appendChild(errorDiv);
            }
            
            isGenerating = false;
            document.getElementById('chatContainer').scrollTop = document.getElementById('chatContainer').scrollHeight;
        }

        // Clear chat
        function clearChat() {
            conversationHistory = [];
            const container = document.getElementById('chatContainer');
            container.innerHTML = `
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">‚óâ</div>
                    <div class="welcome-text">
                        <h1>How can I help you today?</h1>
                        <p>Powered by Pollinations.ai - Completely free, no API keys needed. Ask me anything: coding, analysis, creative writing, research, or just chat.</p>
                    </div>
                    <div class="suggestion-chips">
                        <div class="chip" onclick="sendQuickMessage('Explain quantum computing in simple terms')">
                            <span>‚öõÔ∏è</span> Explain quantum computing
                        </div>
                        <div class="chip" onclick="sendQuickMessage('Write a Python script to automate file organization')">
                            <span>üêç</span> Python automation script
                        </div>
                        <div class="chip" onclick="sendQuickMessage('Compare React vs Vue for a new project')">
                            <span>‚ö°</span> React vs Vue comparison
                        </div>
                        <div class="chip" onclick="sendQuickMessage('Help me debug this code...')">
                            <span>üêõ</span> Debug my code
                        </div>
                        <div class="chip" onclick="sendQuickMessage('Write a professional email requesting time off')">
                            <span>‚úâÔ∏è</span> Professional email
                        </div>
                        <div class="chip" onclick="sendQuickMessage('Analyze the themes in 1984 by Orwell')">
                            <span>üìö</span> Literature analysis
                        </div>
                    </div>
                </div>
            `;
        }

        // Export chat
        function exportChat() {
            if (conversationHistory.length === 0) {
                alert('No conversation to export');
                return;
            }
            
            let exportText = 'KurdiChat Conversation Export\n';
            exportText += '============================\n\n';
            
            conversationHistory.forEach(msg => {
                const role = msg.role === 'user' ? 'You' : 'AI';
                exportText += `${role}: ${msg.content}\n\n`;
            });
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `kurdi-chat-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Focus input on load
        window.onload = () => {
            document.getElementById('messageInput').focus();
        };
    </script>
</body>
</html>
